<%= form_tag base_users_confirm_path, method: :post do %>
    <%= render partial: 'shared/error_summary', locals: { errors: @result.errors } %>

    <h1 class="govuk-heading-xl">
      <%= t('.heading') %>
    </h1>

    <p class="govuk-body-l">
      <%= t('.lead_start') %> <span class="ccs-email-example"><%= params[:email].nil? ? t('.lead_mid'):params[:email] %></span> <%= t('.lead_end') %>
    </p>

    <%= form_tag base_users_confirm_path, class: 'ccs-form', id: 'cop_confirmation_code', method: :post do %>

      <%= form_group_with_error(@result, :confirmation_code) do |displayed_error| %>
        <label class="govuk-label govuk-!-margin-bottom-0" for="confirmation">
          <%= t('.confirmation_code') %>
        </label>

        <span id="confirmation-error" class="govuk-error-message govuk-visually-hidden ccs-e-msg">
          <%= t('activemodel.errors.models.ccs_patterns/home/cog_register_enter_confirmation_code.attributes.enter_confirmation_code') %>
        </span>

        <span id="confirmation-sixerror" class="govuk-error-message govuk-visually-hidden ccs-e-msg">
            <%= t('activemodel.errors.models.ccs_patterns/home/cog_register_enter_confirmation_code.attributes.enter_confirmation_six') %>
        </span>
        <%= displayed_error %>
        <%= text_field_tag :confirmation_code, nil, class: "govuk-input govuk-!-width-one-third", id: 'confirmation', type: 'number' %>
      <% end %> 

      <% if params['email'] %>
        <%= hidden_field_tag :email, params[:email] %>
      <% end %>
      <% if params['email'].nil? %>

        <%= form_group_with_error(@result, :email) do |displayed_error| %>
          <label class="govuk-label" for="email">
            <%= t('.email') %>
          </label>

          <span id="email-error" class="govuk-error-message govuk-visually-hidden ccs-e-msg">
                        <%= t('activemodel.errors.models.ccs_patterns/home/cog_register.attributes.email_format') %>
                    </span>
          <%= displayed_error %>
          <%= text_field_tag :email, nil, autofocus: true, autocomplete: "off", class:"govuk-input govuk-!-width-three-quarters", id: "email", spellcheck: false, aria: {describedby: "email-hint"} %>
        <% end %>
      <% end %>

      <%= submit_tag t('common.continue'), id: "submit", class: "govuk-button govuk-!-padding-left-7 govuk-!-padding-right-7", 'aria-label': "#{t('common.continue')}" %>

    <% end %>

    <% if params[:email] %>
      <p class="govuk-body govuk-!-margin-bottom-7">
        <%= t('.resend_the_confirmation_email_html', link: base_resend_confirmation_email_path(email: params[:email])) %>
      </p>
    <% end %>
  </div>
<% end %>
