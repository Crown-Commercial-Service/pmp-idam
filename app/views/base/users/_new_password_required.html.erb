<%= content_for :page_title, t('.heading') %>
<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <%= render partial: 'shared/error_summary', locals: { errors: @challenge.errors } %>

    <h1 class="govuk-heading-xl">
      <%= t('.heading') %>
    </h1>

    <p class="govuk-body-l">
      <%= t('.intro') %>
    </p>

    <%= form_tag base_users_challenge_path, class: 'ccs-form', id: 'cop_change_password_form', method: :post do %>

      <div class="govuk-form-group govuk-!-margin-bottom-4 <%= 'govuk-form-group--error' if @challenge.errors[:new_password].any? %>">
        <label class="govuk-label" for="password01">
          <%= t('.create_your_password') %>
        </label>

        <%= render '/layouts/password-strength', text: 'password01' %>

        <span id="password01-error" class="govuk-error-message govuk-visually-hidden ccs-e-msg">
                    <%= t('activemodel.errors.models.ccs_patterns/home/cog_sign_in_password_prompt_change.attributes.enter_a_password') %>
                </span>

        <span id="password01-eighterror" class="govuk-error-message govuk-visually-hidden ccs-e-msg">
                    <%= t('activemodel.errors.models.ccs_patterns/home/cog_sign_in_password_prompt_change.attributes.password_must_be') %>
                </span>

        <span id="password01-Serror" class="govuk-error-message govuk-visually-hidden ccs-e-msg">
                    <%= t('activemodel.errors.models.ccs_patterns/home/cog_sign_in_password_prompt_change.attributes.passwords_stronger') %>
                </span>

        <span id="password01-uppererror" class="govuk-error-message govuk-visually-hidden ccs-e-msg">
                    <%= t('activemodel.errors.models.ccs_patterns/home/cog_sign_in_password_prompt_change.attributes.passwords_uppper') %>
                </span>
        <%= display_error(@challenge, :new_password) %>
        <%= password_field_tag :new_password, nil, class: "govuk-input govuk-!-width-two-thirds", id: "password01", autocomplete: "off" %>
      </div>

      <div class="govuk-form-group govuk-!-margin-bottom-7 <%= 'govuk-form-group--error' if @challenge.errors[:new_password_confirmation].any? %>">
        <label class="govuk-label" for="password02">
          <%= t('.confirm_your_password') %>
        </label>

        <span id="password02-error" class="govuk-error-message govuk-visually-hidden ccs-e-msg">
                    <%= t('activemodel.errors.models.ccs_patterns/home/cog_sign_in_password_prompt_change.attributes.enter_your_password') %>
                </span>

        <span id="password02-matcherror" class="govuk-error-message govuk-visually-hidden ccs-e-msg">
                    <%= t('activemodel.errors.models.ccs_patterns/home/cog_sign_in_password_prompt_change.attributes.password_must_match') %>
                </span>
        <%= display_error(@challenge, :new_password_confirmation) %>
        <%= password_field_tag :new_password_confirmation, nil, class: "govuk-input govuk-!-width-two-thirds", id: "password02", autocomplete: "off" %>
      </div>

      <%= hidden_field_tag :session, params[:session] %>

      <%= hidden_field_tag :username, params[:username] %>

      <%= hidden_field_tag :challenge_name, params[:challenge_name] %>

      <%= submit_tag t('common.change_password_and_sign_in'), id: "submit", class: "govuk-button govuk-!-padding-left-7 govuk-!-padding-right-7", 'aria-label': "#{t('common.change_password_and_sign_in')}" %>

    <% end %>



  </div>
</div>
